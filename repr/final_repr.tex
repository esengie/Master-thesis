\subsection{Представление термов}\label{de_brujin_impl}

Таким образом использование полиморфной рекурсии для выражения индексов де Брейна дает нам такие преимущества:
\begin{itemize}
  \item Проверка корректности построения термов на уровне типов (невозможно написать терм Lam 123 в пустом контексте, так как $\lambda$ захватывает только одну переменную).
  \item Можно абстрагировать это представление, превратив Scope в трансформер монад. Тогда нам остается лишь определить представителя класса Monad для нашего представления термов (bind работает как подстановка), что делается крайне просто с точки зрения кодогенерации.
  \item Абстрактное представления дает нам обобщенные функции abstract и instantiate, которые абстрагируют переменную и инстанциируют самую внешнюю связную переменную соответственно. Таким образом решается проблема представления подстановок.
  \item Можно определить обобщенные Show и Eq --- не теряем простоты использования более простого представления без полиморфной рекурсии.
  \item С помощью механизма Deriving Haskell можно получить представителя классов Functor, Traversable и Foldable. Что дает нам функции toList --- список свободных переменных терма --- и traverse --- применить аппликативную функцию к переменным терма.

\end{itemize}
